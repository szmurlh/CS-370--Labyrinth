import java.awt.Graphics;
import java.util.ArrayList;

public class Board {
	
	private double x;
	private double y;
	
	Tile[] tileArray;
	Tile[][] board;
	
	public Board (double x, double y, Game game) {
		
		this.x = x;
		this.y = y;
		
		// Fill the Board Array with all movable tiles
		// This includes all 10 L-tiles, 12 I-tiles
		// and the rest of the loot tiles.
		tileArray = new Tile[34];
		for (int i = 0; i < 10; i++) {
			tileArray[i] = new Tile(0, 0, 29, game);
		}
		for (int i = 0; i < 12; i++) {
			tileArray[10 + i] = new Tile(0, 0, 28, game);
		}
		tileArray[22] = new Tile(0, 0, 27, game);
		tileArray[23] = new Tile(0, 0, 26, game);
		tileArray[24] = new Tile(0, 0, 25, game);
		tileArray[25] = new Tile(0, 0, 24, game);
		tileArray[26] = new Tile(0, 0, 21, game);
		tileArray[27] = new Tile(0, 0, 19, game);
		tileArray[28] = new Tile(0, 0, 14, game);
		tileArray[29] = new Tile(0, 0, 13, game);
		tileArray[30] = new Tile(0, 0, 12, game);
		tileArray[31] = new Tile(0, 0, 9, game);
		tileArray[32] = new Tile(0, 0, 5, game);
		tileArray[33] = new Tile(0, 0, 4, game);
		
		// Finally, we shuffle all the movable pieces to
		// prepare them to enter the board.
		shuffleTiles();
		
		// Here, we fill in all the non-movable tiles into
		// the board and then loop through the movable tiles
		// and fill them into the missing spaces.
		board = new Tile[7][7];
		board[0][0] = new Tile(0, 0, 3, game);
		board[0][2] = new Tile(0, 0, 6, game);
		board[0][4] = new Tile(0, 0, 23, game);
		board[0][6] = new Tile(0, 0, 2, game);
		board[2][0] = new Tile(0, 0, 22, game);
		board[2][2] = new Tile(0, 0, 11, game);
		board[2][4] = new Tile(0, 0, 20, game);
		board[2][6] = new Tile(0, 0, 8, game);
		board[4][0] = new Tile(0, 0, 7, game);
		board[4][2] = new Tile(0, 0, 18, game);
		board[4][4] = new Tile(0, 0, 16, game);
		board[4][6] = new Tile(0, 0, 17, game);
		board[6][0] = new Tile(0, 0, 1, game);
		board[6][2] = new Tile(0, 0, 10, game);
		board[6][4] = new Tile(0, 0, 15, game);
		board[6][6] = new Tile(0, 0, 0, game);
		int index = 0;
		for (int i = 0; i < 7; i++) {
			for (int j = 0; j < 7; j++) {
				if (i % 2 == 1 || j % 2 == 1) {
					board[i][j] = tileArray[index++];
				}
			}
		}
		
		// Now, we update all the x,y positions of
		// each tile in the board.
		for (int i = 0; i < 7; i++) {
			for (int j = 0; j < 7; j++) {
				board[i][j].setX(x + 216*i);
				board[i][j].setY(y + 216*j);
			}
		}
		
	}
	
	public void tick() {
		for (int i = 0; i < 7; i++) {
			for (int j = 0; j < 7; j++) {
				board[i][j].tick();
			}
		}
	}
	
	public void render(Graphics g) {
		for (int i = 0; i < 7; i++) {
			for (int j = 0; j < 7; j++) {
				board[i][j].render(g);
			}
		}
	}
	
	private void shuffleTiles() {
		ArrayList<Tile> temp = new ArrayList<Tile>();
		for (int i = 0; i < tileArray.length; i++) {
			temp.add(tileArray[i]);
		}
		
		int index = 0;
		while (temp.size() > 0) {
			tileArray[index++] = temp.remove((int)(Math.random()*temp.size()));
		}
	}
	
}
